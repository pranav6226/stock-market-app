{"ast":null,"code":"var _jsxFileName = \"/Users/pranav/Desktop/SU/Spring'25/IST 615 - Cloud Management/stock-market-app/src/components/StockComparison.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, ComposedChart, Bar } from 'recharts';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst StockComparison = ({\n  primaryStock = {},\n  API_URLS = []\n}) => {\n  _s();\n  const [comparisonSymbols, setComparisonSymbols] = useState(['MSFT', 'GOOG']);\n  const [comparisonData, setComparisonData] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [showInput, setShowInput] = useState(false);\n  const [newSymbol, setNewSymbol] = useState('');\n  const [chartType, setChartType] = useState('price');\n  const [dataLoaded, setDataLoaded] = useState(false);\n\n  // Colors for different stocks\n  const COLORS = ['#4CAF50',\n  // Primary stock (green)\n  '#2196F3',\n  // Microsoft (blue)\n  '#FF5722',\n  // Google (orange)\n  '#9C27B0',\n  // Purple\n  '#FFEB3B',\n  // Yellow\n  '#607D8B' // Blue Grey\n  ];\n\n  // Generate mock historical data for visualization\n  const generateMockHistoricalData = useCallback(currentPrice => {\n    const data = [];\n\n    // For expensive stocks, use smaller volatility to avoid unrealistic swings\n    const volatility = currentPrice > 1000 ? 0.005 : currentPrice > 500 ? 0.008 : currentPrice > 100 ? 0.01 : 0.015;\n\n    // Start with a price that's slightly lower than current for an uptrend\n    const startingPriceRatio = 0.94 + Math.random() * 0.04; // Between 94% and 98% of current price\n    let price = currentPrice * startingPriceRatio;\n    const today = new Date();\n\n    // Create a generally upward trend with realistic daily movements\n    for (let i = 30; i >= 0; i--) {\n      const date = new Date(today);\n      date.setDate(today.getDate() - i);\n      const formattedDate = `${date.getMonth() + 1}/${date.getDate()}`;\n\n      // Add slight upward bias (markets trend up over time)\n      // Higher probability of small positive moves, with occasional bigger moves in either direction\n      const changeDirection = Math.random();\n      let change;\n      if (changeDirection > 0.57) {\n        // 43% chance of decrease\n        change = -price * volatility * Math.random(); // Negative change\n      } else if (changeDirection > 0.2) {\n        // 37% chance of small increase\n        change = price * volatility * 0.5 * Math.random(); // Small positive change\n      } else {\n        // 20% chance of larger increase\n        change = price * volatility * Math.random(); // Larger positive change\n      }\n      price += change;\n\n      // Ensure price doesn't go negative or too far from reality\n      if (price <= 0 || price > currentPrice * 1.5) {\n        price = currentPrice * (0.85 + Math.random() * 0.25); // Reset to a reasonable value\n      }\n      data.push({\n        date: formattedDate,\n        price: parseFloat(price.toFixed(2))\n      });\n    }\n\n    // Ensure the last data point is close to the current price\n    // This makes the chart consistent with the displayed current price\n    data[data.length - 1].price = parseFloat((currentPrice * (0.995 + Math.random() * 0.01)).toFixed(2));\n    return data;\n  }, []);\n\n  // Helper function to fetch stock data\n  const fetchStockData = useCallback(async (symbol, dataObject) => {\n    try {\n      // Try each API URL until one works\n      for (let i = 0; i < API_URLS.length; i++) {\n        try {\n          const response = await axios.get(`${API_URLS[i]}?symbol=${symbol}`, {\n            timeout: 5000\n          });\n          if (response.data && !response.data.error) {\n            dataObject[symbol] = {\n              price: parseFloat(response.data['05. price']),\n              change: parseFloat(response.data['09. change']),\n              percentChange: parseFloat(response.data['10. change percent'].replace('%', '')),\n              historicalData: generateMockHistoricalData(parseFloat(response.data['05. price']))\n            };\n            break; // Exit the loop if successful\n          }\n        } catch (err) {\n          if (i === API_URLS.length - 1) {\n            console.error(`Failed to fetch data for ${symbol}`);\n            // Create mock data if API fails\n            dataObject[symbol] = {\n              price: Math.random() * 200 + 50,\n              change: Math.random() * 10 - 5,\n              percentChange: Math.random() * 5 - 2.5,\n              historicalData: generateMockHistoricalData(Math.random() * 200 + 50)\n            };\n          }\n        }\n      }\n    } catch (err) {\n      console.error(`Error fetching data for ${symbol}:`, err);\n    }\n  }, [API_URLS, generateMockHistoricalData]);\n\n  // Fetch data for comparison stocks\n  useEffect(() => {\n    // If we don't have API_URLS, can't proceed\n    if (!API_URLS || API_URLS.length === 0) {\n      console.error(\"API URLs not available\");\n      return;\n    }\n\n    // Prevent re-fetching if data is already loaded\n    if (dataLoaded && Object.keys(comparisonData).length > 0) {\n      return;\n    }\n    const fetchComparisonData = async () => {\n      // Use a default primary symbol if none provided\n      const primarySymbol = primaryStock && primaryStock['01. symbol'] ? primaryStock['01. symbol'] : 'AAPL';\n      setLoading(true);\n      const newData = {};\n\n      // Add primary stock data if available, otherwise fetch it\n      if (primaryStock && primaryStock['01. symbol']) {\n        newData[primaryStock['01. symbol']] = {\n          price: parseFloat(primaryStock['05. price']),\n          change: parseFloat(primaryStock['09. change']),\n          percentChange: parseFloat(primaryStock['10. change percent'].replace('%', '')),\n          historicalData: generateMockHistoricalData(parseFloat(primaryStock['05. price']))\n        };\n      } else {\n        // Fetch primary stock data if not provided\n        try {\n          const symbol = 'AAPL'; // Default\n          await fetchStockData(symbol, newData);\n        } catch (err) {\n          console.error(`Error fetching data for default stock:`, err);\n        }\n      }\n\n      // Fetch data for each comparison symbol\n      for (const symbol of comparisonSymbols) {\n        if (symbol === primarySymbol) continue;\n        await fetchStockData(symbol, newData);\n      }\n      setComparisonData(newData);\n      setLoading(false);\n      setDataLoaded(true); // Mark data as loaded after successful fetch\n    };\n    fetchComparisonData();\n  }, [primaryStock, comparisonSymbols, API_URLS, dataLoaded, fetchStockData, generateMockHistoricalData, comparisonData]);\n\n  // Merge historical data for comparison chart\n  const prepareComparisonChartData = () => {\n    var _comparisonData$first;\n    if (Object.keys(comparisonData).length === 0) return [];\n\n    // Get all dates from the first stock (any stock)\n    const firstSymbol = Object.keys(comparisonData)[0];\n    if (!((_comparisonData$first = comparisonData[firstSymbol]) !== null && _comparisonData$first !== void 0 && _comparisonData$first.historicalData)) return [];\n    const mergedData = {};\n\n    // Process each stock's data\n    Object.keys(comparisonData).forEach(symbol => {\n      var _comparisonData$symbo;\n      if (!((_comparisonData$symbo = comparisonData[symbol]) !== null && _comparisonData$symbo !== void 0 && _comparisonData$symbo.historicalData)) return;\n      comparisonData[symbol].historicalData.forEach(dataPoint => {\n        if (!mergedData[dataPoint.date]) {\n          mergedData[dataPoint.date] = {\n            date: dataPoint.date\n          };\n        }\n        mergedData[dataPoint.date][symbol] = dataPoint.price;\n      });\n    });\n\n    // Convert to array and sort by date\n    return Object.values(mergedData).sort((a, b) => {\n      const dateA = new Date(a.date.split('/')[0], a.date.split('/')[1]);\n      const dateB = new Date(b.date.split('/')[0], b.date.split('/')[1]);\n      return dateA - dateB;\n    });\n  };\n\n  // Add a new stock to compare\n  const handleAddSymbol = () => {\n    if (!newSymbol || comparisonSymbols.includes(newSymbol)) {\n      setShowInput(false);\n      setNewSymbol('');\n      return;\n    }\n    setComparisonSymbols([...comparisonSymbols, newSymbol.toUpperCase()]);\n    setDataLoaded(false); // Reset dataLoaded state to force refresh with new symbol\n    setShowInput(false);\n    setNewSymbol('');\n  };\n\n  // Remove a stock from comparison\n  const handleRemoveSymbol = symbol => {\n    setComparisonSymbols(comparisonSymbols.filter(s => s !== symbol));\n    setDataLoaded(false); // Reset dataLoaded state to force refresh without this symbol\n  };\n\n  // Prepare performance comparison data\n  const preparePerformanceData = () => {\n    const performanceData = [];\n    Object.keys(comparisonData).forEach((symbol, index) => {\n      if (comparisonData[symbol]) {\n        performanceData.push({\n          name: symbol,\n          value: comparisonData[symbol].percentChange,\n          color: COLORS[index % COLORS.length],\n          price: comparisonData[symbol].price\n        });\n      }\n    });\n    return performanceData;\n  };\n  const comparisonChartData = prepareComparisonChartData();\n  const performanceData = preparePerformanceData();\n\n  // Render price comparison chart\n  const renderPriceChart = () => /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n    width: \"100%\",\n    height: 350,\n    children: /*#__PURE__*/_jsxDEV(LineChart, {\n      data: comparisonChartData,\n      margin: {\n        top: 5,\n        right: 30,\n        left: 20,\n        bottom: 5\n      },\n      children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n        strokeDasharray: \"3 3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n        dataKey: \"date\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n        tickFormatter: value => {\n          // Format large numbers with K/M suffixes\n          if (value >= 1000 && value < 1000000) {\n            return `$${(value / 1000).toFixed(1)}K`;\n          } else if (value >= 1000000) {\n            return `$${(value / 1000000).toFixed(1)}M`;\n          }\n          return `$${value.toFixed(2)}`;\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n        formatter: value => {\n          // Format the value with commas for thousands\n          return [`$${parseFloat(value).toLocaleString(undefined, {\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2\n          })}`, ''];\n        },\n        labelFormatter: label => `Date: ${label}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Legend, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 9\n      }, this), Object.keys(comparisonData).map((symbol, index) => /*#__PURE__*/_jsxDEV(Line, {\n        type: \"monotone\",\n        dataKey: symbol,\n        stroke: COLORS[index % COLORS.length],\n        activeDot: {\n          r: 8\n        },\n        name: symbol\n      }, symbol, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 248,\n    columnNumber: 5\n  }, this);\n\n  // Render performance comparison chart\n  const renderPerformanceChart = () => /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n    width: \"100%\",\n    height: 350,\n    children: /*#__PURE__*/_jsxDEV(ComposedChart, {\n      layout: \"vertical\",\n      data: performanceData,\n      margin: {\n        top: 20,\n        right: 30,\n        left: 70,\n        bottom: 5\n      },\n      children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n        strokeDasharray: \"3 3\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n        type: \"number\",\n        tickFormatter: value => `${value.toFixed(2)}%`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(YAxis, {\n        dataKey: \"name\",\n        type: \"category\",\n        width: 60\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n        formatter: (value, name, props) => {\n          if (name === 'value') return [`${value.toFixed(2)}%`, 'Change'];\n          return [value, name];\n        },\n        labelFormatter: value => `${value}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Bar, {\n        dataKey: \"value\",\n        fill: \"#8884d8\",\n        barSize: 20,\n        children: performanceData.map((entry, index) => /*#__PURE__*/_jsxDEV(Bar, {\n          fill: entry.color\n        }, `cell-${index}`, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 294,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 293,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card stock-comparison\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comparison-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Stock Comparison\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-type-selector\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: chartType === 'price' ? 'active' : '',\n          onClick: () => setChartType('price'),\n          children: \"Price History\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: chartType === 'performance' ? 'active' : '',\n          onClick: () => setChartType('performance'),\n          children: \"Performance\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setDataLoaded(false);\n            setLoading(true);\n          },\n          disabled: loading,\n          children: loading ? 'Refreshing...' : 'Refresh Data'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comparison-symbols\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Comparing: \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"symbol-tags\",\n        children: [primaryStock && primaryStock['01. symbol'] && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"symbol-tag primary\",\n          children: primaryStock['01. symbol']\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 13\n        }, this), comparisonSymbols.map(symbol => primaryStock && symbol !== primaryStock['01. symbol'] && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"symbol-tag\",\n          children: [symbol, /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"remove-symbol\",\n            onClick: () => handleRemoveSymbol(symbol),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 368,\n            columnNumber: 17\n          }, this)]\n        }, symbol, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 15\n        }, this)), !showInput && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"add-symbol-btn\",\n          onClick: () => setShowInput(true),\n          children: \"+ Add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 13\n        }, this), showInput && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"add-symbol-input\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: newSymbol,\n            onChange: e => setNewSymbol(e.target.value),\n            placeholder: \"Symbol\",\n            maxLength: 5\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 389,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAddSymbol,\n            children: \"Add\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowInput(false),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 397,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-comparison\",\n      children: \"Loading comparison data...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"comparison-chart\",\n      children: chartType === 'price' ? renderPriceChart() : renderPerformanceChart()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 330,\n    columnNumber: 5\n  }, this);\n};\n_s(StockComparison, \"20JBxulXtyNYHmmeqTZbWp8xI/Q=\");\n_c = StockComparison;\nexport default StockComparison;\nvar _c;\n$RefreshReg$(_c, \"StockComparison\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","ComposedChart","Bar","axios","jsxDEV","_jsxDEV","StockComparison","primaryStock","API_URLS","_s","comparisonSymbols","setComparisonSymbols","comparisonData","setComparisonData","loading","setLoading","showInput","setShowInput","newSymbol","setNewSymbol","chartType","setChartType","dataLoaded","setDataLoaded","COLORS","generateMockHistoricalData","currentPrice","data","volatility","startingPriceRatio","Math","random","price","today","Date","i","date","setDate","getDate","formattedDate","getMonth","changeDirection","change","push","parseFloat","toFixed","length","fetchStockData","symbol","dataObject","response","get","timeout","error","percentChange","replace","historicalData","err","console","Object","keys","fetchComparisonData","primarySymbol","newData","prepareComparisonChartData","_comparisonData$first","firstSymbol","mergedData","forEach","_comparisonData$symbo","dataPoint","values","sort","a","b","dateA","split","dateB","handleAddSymbol","includes","toUpperCase","handleRemoveSymbol","filter","s","preparePerformanceData","performanceData","index","name","value","color","comparisonChartData","renderPriceChart","width","height","children","margin","top","right","left","bottom","strokeDasharray","fileName","_jsxFileName","lineNumber","columnNumber","dataKey","tickFormatter","formatter","toLocaleString","undefined","minimumFractionDigits","maximumFractionDigits","labelFormatter","label","map","type","stroke","activeDot","r","renderPerformanceChart","layout","props","fill","barSize","entry","className","onClick","disabled","onChange","e","target","placeholder","maxLength","_c","$RefreshReg$"],"sources":["/Users/pranav/Desktop/SU/Spring'25/IST 615 - Cloud Management/stock-market-app/src/components/StockComparison.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { \n  LineChart, Line, XAxis, YAxis, CartesianGrid, \n  Tooltip, Legend, ResponsiveContainer, ComposedChart, Bar\n} from 'recharts';\nimport axios from 'axios';\n\nconst StockComparison = ({ primaryStock = {}, API_URLS = [] }) => {\n  const [comparisonSymbols, setComparisonSymbols] = useState(['MSFT', 'GOOG']);\n  const [comparisonData, setComparisonData] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [showInput, setShowInput] = useState(false);\n  const [newSymbol, setNewSymbol] = useState('');\n  const [chartType, setChartType] = useState('price');\n  const [dataLoaded, setDataLoaded] = useState(false);\n\n  // Colors for different stocks\n  const COLORS = [\n    '#4CAF50', // Primary stock (green)\n    '#2196F3', // Microsoft (blue)\n    '#FF5722', // Google (orange)\n    '#9C27B0', // Purple\n    '#FFEB3B', // Yellow\n    '#607D8B'  // Blue Grey\n  ];\n\n  // Generate mock historical data for visualization\n  const generateMockHistoricalData = useCallback((currentPrice) => {\n    const data = [];\n    \n    // For expensive stocks, use smaller volatility to avoid unrealistic swings\n    const volatility = currentPrice > 1000 ? 0.005 : \n                       currentPrice > 500 ? 0.008 : \n                       currentPrice > 100 ? 0.01 : 0.015;\n    \n    // Start with a price that's slightly lower than current for an uptrend\n    const startingPriceRatio = 0.94 + (Math.random() * 0.04); // Between 94% and 98% of current price\n    let price = currentPrice * startingPriceRatio;\n    \n    const today = new Date();\n    \n    // Create a generally upward trend with realistic daily movements\n    for (let i = 30; i >= 0; i--) {\n      const date = new Date(today);\n      date.setDate(today.getDate() - i);\n      const formattedDate = `${date.getMonth() + 1}/${date.getDate()}`;\n      \n      // Add slight upward bias (markets trend up over time)\n      // Higher probability of small positive moves, with occasional bigger moves in either direction\n      const changeDirection = Math.random();\n      let change;\n      \n      if (changeDirection > 0.57) {  // 43% chance of decrease\n        change = -price * volatility * Math.random();  // Negative change\n      } else if (changeDirection > 0.2) {  // 37% chance of small increase\n        change = price * volatility * 0.5 * Math.random();  // Small positive change\n      } else {  // 20% chance of larger increase\n        change = price * volatility * Math.random();  // Larger positive change\n      }\n      \n      price += change;\n      \n      // Ensure price doesn't go negative or too far from reality\n      if (price <= 0 || price > currentPrice * 1.5) {\n        price = currentPrice * (0.85 + Math.random() * 0.25); // Reset to a reasonable value\n      }\n      \n      data.push({\n        date: formattedDate,\n        price: parseFloat(price.toFixed(2))\n      });\n    }\n    \n    // Ensure the last data point is close to the current price\n    // This makes the chart consistent with the displayed current price\n    data[data.length - 1].price = parseFloat((currentPrice * (0.995 + Math.random() * 0.01)).toFixed(2));\n    \n    return data;\n  }, []);\n\n  // Helper function to fetch stock data\n  const fetchStockData = useCallback(async (symbol, dataObject) => {\n    try {\n      // Try each API URL until one works\n      for (let i = 0; i < API_URLS.length; i++) {\n        try {\n          const response = await axios.get(\n            `${API_URLS[i]}?symbol=${symbol}`,\n            { timeout: 5000 }\n          );\n          \n          if (response.data && !response.data.error) {\n            dataObject[symbol] = {\n              price: parseFloat(response.data['05. price']),\n              change: parseFloat(response.data['09. change']),\n              percentChange: parseFloat(response.data['10. change percent'].replace('%', '')),\n              historicalData: generateMockHistoricalData(parseFloat(response.data['05. price']))\n            };\n            \n            break; // Exit the loop if successful\n          }\n        } catch (err) {\n          if (i === API_URLS.length - 1) {\n            console.error(`Failed to fetch data for ${symbol}`);\n            // Create mock data if API fails\n            dataObject[symbol] = {\n              price: Math.random() * 200 + 50,\n              change: (Math.random() * 10) - 5,\n              percentChange: (Math.random() * 5) - 2.5,\n              historicalData: generateMockHistoricalData(Math.random() * 200 + 50)\n            };\n          }\n        }\n      }\n    } catch (err) {\n      console.error(`Error fetching data for ${symbol}:`, err);\n    }\n  }, [API_URLS, generateMockHistoricalData]);\n\n  // Fetch data for comparison stocks\n  useEffect(() => {\n    // If we don't have API_URLS, can't proceed\n    if (!API_URLS || API_URLS.length === 0) {\n      console.error(\"API URLs not available\");\n      return;\n    }\n    \n    // Prevent re-fetching if data is already loaded\n    if (dataLoaded && Object.keys(comparisonData).length > 0) {\n      return;\n    }\n    \n    const fetchComparisonData = async () => {\n      // Use a default primary symbol if none provided\n      const primarySymbol = primaryStock && primaryStock['01. symbol'] \n        ? primaryStock['01. symbol'] \n        : 'AAPL';\n      \n      setLoading(true);\n      const newData = {};\n      \n      // Add primary stock data if available, otherwise fetch it\n      if (primaryStock && primaryStock['01. symbol']) {\n        newData[primaryStock['01. symbol']] = {\n          price: parseFloat(primaryStock['05. price']),\n          change: parseFloat(primaryStock['09. change']),\n          percentChange: parseFloat(primaryStock['10. change percent'].replace('%', '')),\n          historicalData: generateMockHistoricalData(parseFloat(primaryStock['05. price']))\n        };\n      } else {\n        // Fetch primary stock data if not provided\n        try {\n          const symbol = 'AAPL'; // Default\n          await fetchStockData(symbol, newData);\n        } catch (err) {\n          console.error(`Error fetching data for default stock:`, err);\n        }\n      }\n      \n      // Fetch data for each comparison symbol\n      for (const symbol of comparisonSymbols) {\n        if (symbol === primarySymbol) continue;\n        \n        await fetchStockData(symbol, newData);\n      }\n      \n      setComparisonData(newData);\n      setLoading(false);\n      setDataLoaded(true); // Mark data as loaded after successful fetch\n    };\n    \n    fetchComparisonData();\n  }, [primaryStock, comparisonSymbols, API_URLS, dataLoaded, fetchStockData, generateMockHistoricalData, comparisonData]);\n\n  // Merge historical data for comparison chart\n  const prepareComparisonChartData = () => {\n    if (Object.keys(comparisonData).length === 0) return [];\n    \n    // Get all dates from the first stock (any stock)\n    const firstSymbol = Object.keys(comparisonData)[0];\n    if (!comparisonData[firstSymbol]?.historicalData) return [];\n    \n    const mergedData = {};\n    \n    // Process each stock's data\n    Object.keys(comparisonData).forEach(symbol => {\n      if (!comparisonData[symbol]?.historicalData) return;\n      \n      comparisonData[symbol].historicalData.forEach(dataPoint => {\n        if (!mergedData[dataPoint.date]) {\n          mergedData[dataPoint.date] = { date: dataPoint.date };\n        }\n        mergedData[dataPoint.date][symbol] = dataPoint.price;\n      });\n    });\n    \n    // Convert to array and sort by date\n    return Object.values(mergedData).sort((a, b) => {\n      const dateA = new Date(a.date.split('/')[0], a.date.split('/')[1]);\n      const dateB = new Date(b.date.split('/')[0], b.date.split('/')[1]);\n      return dateA - dateB;\n    });\n  };\n\n  // Add a new stock to compare\n  const handleAddSymbol = () => {\n    if (!newSymbol || comparisonSymbols.includes(newSymbol)) {\n      setShowInput(false);\n      setNewSymbol('');\n      return;\n    }\n    \n    setComparisonSymbols([...comparisonSymbols, newSymbol.toUpperCase()]);\n    setDataLoaded(false); // Reset dataLoaded state to force refresh with new symbol\n    setShowInput(false);\n    setNewSymbol('');\n  };\n\n  // Remove a stock from comparison\n  const handleRemoveSymbol = (symbol) => {\n    setComparisonSymbols(comparisonSymbols.filter(s => s !== symbol));\n    setDataLoaded(false); // Reset dataLoaded state to force refresh without this symbol\n  };\n\n  // Prepare performance comparison data\n  const preparePerformanceData = () => {\n    const performanceData = [];\n    \n    Object.keys(comparisonData).forEach((symbol, index) => {\n      if (comparisonData[symbol]) {\n        performanceData.push({\n          name: symbol,\n          value: comparisonData[symbol].percentChange,\n          color: COLORS[index % COLORS.length],\n          price: comparisonData[symbol].price\n        });\n      }\n    });\n    \n    return performanceData;\n  };\n\n  const comparisonChartData = prepareComparisonChartData();\n  const performanceData = preparePerformanceData();\n\n  // Render price comparison chart\n  const renderPriceChart = () => (\n    <ResponsiveContainer width=\"100%\" height={350}>\n      <LineChart\n        data={comparisonChartData}\n        margin={{ top: 5, right: 30, left: 20, bottom: 5 }}\n      >\n        <CartesianGrid strokeDasharray=\"3 3\" />\n        <XAxis dataKey=\"date\" />\n        <YAxis \n          tickFormatter={(value) => {\n            // Format large numbers with K/M suffixes\n            if (value >= 1000 && value < 1000000) {\n              return `$${(value / 1000).toFixed(1)}K`;\n            } else if (value >= 1000000) {\n              return `$${(value / 1000000).toFixed(1)}M`;\n            }\n            return `$${value.toFixed(2)}`;\n          }}\n        />\n        <Tooltip \n          formatter={(value) => {\n            // Format the value with commas for thousands\n            return [`$${parseFloat(value).toLocaleString(undefined, {\n              minimumFractionDigits: 2,\n              maximumFractionDigits: 2\n            })}`, ''];\n          }}\n          labelFormatter={(label) => `Date: ${label}`}\n        />\n        <Legend />\n        {Object.keys(comparisonData).map((symbol, index) => (\n          <Line\n            key={symbol}\n            type=\"monotone\"\n            dataKey={symbol}\n            stroke={COLORS[index % COLORS.length]}\n            activeDot={{ r: 8 }}\n            name={symbol}\n          />\n        ))}\n      </LineChart>\n    </ResponsiveContainer>\n  );\n\n  // Render performance comparison chart\n  const renderPerformanceChart = () => (\n    <ResponsiveContainer width=\"100%\" height={350}>\n      <ComposedChart\n        layout=\"vertical\"\n        data={performanceData}\n        margin={{ top: 20, right: 30, left: 70, bottom: 5 }}\n      >\n        <CartesianGrid strokeDasharray=\"3 3\" />\n        <XAxis \n          type=\"number\" \n          tickFormatter={(value) => `${value.toFixed(2)}%`} \n        />\n        <YAxis \n          dataKey=\"name\" \n          type=\"category\" \n          width={60} \n        />\n        <Tooltip \n          formatter={(value, name, props) => {\n            if (name === 'value') return [`${value.toFixed(2)}%`, 'Change'];\n            return [value, name];\n          }}\n          labelFormatter={(value) => `${value}`}\n        />\n        <Bar \n          dataKey=\"value\" \n          fill=\"#8884d8\" \n          barSize={20}\n        >\n          {performanceData.map((entry, index) => (\n            <Bar key={`cell-${index}`} fill={entry.color} />\n          ))}\n        </Bar>\n      </ComposedChart>\n    </ResponsiveContainer>\n  );\n\n  return (\n    <div className=\"card stock-comparison\">\n      <div className=\"comparison-header\">\n        <h2>Stock Comparison</h2>\n        <div className=\"chart-type-selector\">\n          <button \n            className={chartType === 'price' ? 'active' : ''} \n            onClick={() => setChartType('price')}\n          >\n            Price History\n          </button>\n          <button \n            className={chartType === 'performance' ? 'active' : ''} \n            onClick={() => setChartType('performance')}\n          >\n            Performance\n          </button>\n          <button \n            onClick={() => {\n              setDataLoaded(false);\n              setLoading(true);\n            }}\n            disabled={loading}\n          >\n            {loading ? 'Refreshing...' : 'Refresh Data'}\n          </button>\n        </div>\n      </div>\n      \n      <div className=\"comparison-symbols\">\n        <p>Comparing: </p>\n        <div className=\"symbol-tags\">\n          {primaryStock && primaryStock['01. symbol'] && (\n            <span className=\"symbol-tag primary\">{primaryStock['01. symbol']}</span>\n          )}\n          {comparisonSymbols.map(symbol => (\n            (primaryStock && symbol !== primaryStock['01. symbol']) && (\n              <span key={symbol} className=\"symbol-tag\">\n                {symbol}\n                <button \n                  className=\"remove-symbol\" \n                  onClick={() => handleRemoveSymbol(symbol)}\n                >\n                  ×\n                </button>\n              </span>\n            )\n          ))}\n          \n          {!showInput && (\n            <button \n              className=\"add-symbol-btn\" \n              onClick={() => setShowInput(true)}\n            >\n              + Add\n            </button>\n          )}\n          \n          {showInput && (\n            <div className=\"add-symbol-input\">\n              <input\n                type=\"text\"\n                value={newSymbol}\n                onChange={(e) => setNewSymbol(e.target.value)}\n                placeholder=\"Symbol\"\n                maxLength={5}\n              />\n              <button onClick={handleAddSymbol}>Add</button>\n              <button onClick={() => setShowInput(false)}>Cancel</button>\n            </div>\n          )}\n        </div>\n      </div>\n      \n      {loading ? (\n        <div className=\"loading-comparison\">Loading comparison data...</div>\n      ) : (\n        <div className=\"comparison-chart\">\n          {chartType === 'price' ? renderPriceChart() : renderPerformanceChart()}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default StockComparison; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SACEC,SAAS,EAAEC,IAAI,EAAEC,KAAK,EAAEC,KAAK,EAAEC,aAAa,EAC5CC,OAAO,EAAEC,MAAM,EAAEC,mBAAmB,EAAEC,aAAa,EAAEC,GAAG,QACnD,UAAU;AACjB,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,eAAe,GAAGA,CAAC;EAAEC,YAAY,GAAG,CAAC,CAAC;EAAEC,QAAQ,GAAG;AAAG,CAAC,KAAK;EAAAC,EAAA;EAChE,MAAM,CAACC,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGrB,QAAQ,CAAC,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;EAC5E,MAAM,CAACsB,cAAc,EAAEC,iBAAiB,CAAC,GAAGvB,QAAQ,CAAC,CAAC,CAAC,CAAC;EACxD,MAAM,CAACwB,OAAO,EAAEC,UAAU,CAAC,GAAGzB,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAAC0B,SAAS,EAAEC,YAAY,CAAC,GAAG3B,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAAC4B,SAAS,EAAEC,YAAY,CAAC,GAAG7B,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAAC8B,SAAS,EAAEC,YAAY,CAAC,GAAG/B,QAAQ,CAAC,OAAO,CAAC;EACnD,MAAM,CAACgC,UAAU,EAAEC,aAAa,CAAC,GAAGjC,QAAQ,CAAC,KAAK,CAAC;;EAEnD;EACA,MAAMkC,MAAM,GAAG,CACb,SAAS;EAAE;EACX,SAAS;EAAE;EACX,SAAS;EAAE;EACX,SAAS;EAAE;EACX,SAAS;EAAE;EACX,SAAS,CAAE;EAAA,CACZ;;EAED;EACA,MAAMC,0BAA0B,GAAGjC,WAAW,CAAEkC,YAAY,IAAK;IAC/D,MAAMC,IAAI,GAAG,EAAE;;IAEf;IACA,MAAMC,UAAU,GAAGF,YAAY,GAAG,IAAI,GAAG,KAAK,GAC3BA,YAAY,GAAG,GAAG,GAAG,KAAK,GAC1BA,YAAY,GAAG,GAAG,GAAG,IAAI,GAAG,KAAK;;IAEpD;IACA,MAAMG,kBAAkB,GAAG,IAAI,GAAIC,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,IAAK,CAAC,CAAC;IAC1D,IAAIC,KAAK,GAAGN,YAAY,GAAGG,kBAAkB;IAE7C,MAAMI,KAAK,GAAG,IAAIC,IAAI,CAAC,CAAC;;IAExB;IACA,KAAK,IAAIC,CAAC,GAAG,EAAE,EAAEA,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;MAC5B,MAAMC,IAAI,GAAG,IAAIF,IAAI,CAACD,KAAK,CAAC;MAC5BG,IAAI,CAACC,OAAO,CAACJ,KAAK,CAACK,OAAO,CAAC,CAAC,GAAGH,CAAC,CAAC;MACjC,MAAMI,aAAa,GAAG,GAAGH,IAAI,CAACI,QAAQ,CAAC,CAAC,GAAG,CAAC,IAAIJ,IAAI,CAACE,OAAO,CAAC,CAAC,EAAE;;MAEhE;MACA;MACA,MAAMG,eAAe,GAAGX,IAAI,CAACC,MAAM,CAAC,CAAC;MACrC,IAAIW,MAAM;MAEV,IAAID,eAAe,GAAG,IAAI,EAAE;QAAG;QAC7BC,MAAM,GAAG,CAACV,KAAK,GAAGJ,UAAU,GAAGE,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,CAAE;MACjD,CAAC,MAAM,IAAIU,eAAe,GAAG,GAAG,EAAE;QAAG;QACnCC,MAAM,GAAGV,KAAK,GAAGJ,UAAU,GAAG,GAAG,GAAGE,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,CAAE;MACtD,CAAC,MAAM;QAAG;QACRW,MAAM,GAAGV,KAAK,GAAGJ,UAAU,GAAGE,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC,CAAE;MAChD;MAEAC,KAAK,IAAIU,MAAM;;MAEf;MACA,IAAIV,KAAK,IAAI,CAAC,IAAIA,KAAK,GAAGN,YAAY,GAAG,GAAG,EAAE;QAC5CM,KAAK,GAAGN,YAAY,IAAI,IAAI,GAAGI,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;MACxD;MAEAJ,IAAI,CAACgB,IAAI,CAAC;QACRP,IAAI,EAAEG,aAAa;QACnBP,KAAK,EAAEY,UAAU,CAACZ,KAAK,CAACa,OAAO,CAAC,CAAC,CAAC;MACpC,CAAC,CAAC;IACJ;;IAEA;IACA;IACAlB,IAAI,CAACA,IAAI,CAACmB,MAAM,GAAG,CAAC,CAAC,CAACd,KAAK,GAAGY,UAAU,CAAC,CAAClB,YAAY,IAAI,KAAK,GAAGI,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,EAAEc,OAAO,CAAC,CAAC,CAAC,CAAC;IAEpG,OAAOlB,IAAI;EACb,CAAC,EAAE,EAAE,CAAC;;EAEN;EACA,MAAMoB,cAAc,GAAGvD,WAAW,CAAC,OAAOwD,MAAM,EAAEC,UAAU,KAAK;IAC/D,IAAI;MACF;MACA,KAAK,IAAId,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG3B,QAAQ,CAACsC,MAAM,EAAEX,CAAC,EAAE,EAAE;QACxC,IAAI;UACF,MAAMe,QAAQ,GAAG,MAAM/C,KAAK,CAACgD,GAAG,CAC9B,GAAG3C,QAAQ,CAAC2B,CAAC,CAAC,WAAWa,MAAM,EAAE,EACjC;YAAEI,OAAO,EAAE;UAAK,CAClB,CAAC;UAED,IAAIF,QAAQ,CAACvB,IAAI,IAAI,CAACuB,QAAQ,CAACvB,IAAI,CAAC0B,KAAK,EAAE;YACzCJ,UAAU,CAACD,MAAM,CAAC,GAAG;cACnBhB,KAAK,EAAEY,UAAU,CAACM,QAAQ,CAACvB,IAAI,CAAC,WAAW,CAAC,CAAC;cAC7Ce,MAAM,EAAEE,UAAU,CAACM,QAAQ,CAACvB,IAAI,CAAC,YAAY,CAAC,CAAC;cAC/C2B,aAAa,EAAEV,UAAU,CAACM,QAAQ,CAACvB,IAAI,CAAC,oBAAoB,CAAC,CAAC4B,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;cAC/EC,cAAc,EAAE/B,0BAA0B,CAACmB,UAAU,CAACM,QAAQ,CAACvB,IAAI,CAAC,WAAW,CAAC,CAAC;YACnF,CAAC;YAED,MAAM,CAAC;UACT;QACF,CAAC,CAAC,OAAO8B,GAAG,EAAE;UACZ,IAAItB,CAAC,KAAK3B,QAAQ,CAACsC,MAAM,GAAG,CAAC,EAAE;YAC7BY,OAAO,CAACL,KAAK,CAAC,4BAA4BL,MAAM,EAAE,CAAC;YACnD;YACAC,UAAU,CAACD,MAAM,CAAC,GAAG;cACnBhB,KAAK,EAAEF,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE;cAC/BW,MAAM,EAAGZ,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,EAAE,GAAI,CAAC;cAChCuB,aAAa,EAAGxB,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,CAAC,GAAI,GAAG;cACxCyB,cAAc,EAAE/B,0BAA0B,CAACK,IAAI,CAACC,MAAM,CAAC,CAAC,GAAG,GAAG,GAAG,EAAE;YACrE,CAAC;UACH;QACF;MACF;IACF,CAAC,CAAC,OAAO0B,GAAG,EAAE;MACZC,OAAO,CAACL,KAAK,CAAC,2BAA2BL,MAAM,GAAG,EAAES,GAAG,CAAC;IAC1D;EACF,CAAC,EAAE,CAACjD,QAAQ,EAAEiB,0BAA0B,CAAC,CAAC;;EAE1C;EACAlC,SAAS,CAAC,MAAM;IACd;IACA,IAAI,CAACiB,QAAQ,IAAIA,QAAQ,CAACsC,MAAM,KAAK,CAAC,EAAE;MACtCY,OAAO,CAACL,KAAK,CAAC,wBAAwB,CAAC;MACvC;IACF;;IAEA;IACA,IAAI/B,UAAU,IAAIqC,MAAM,CAACC,IAAI,CAAChD,cAAc,CAAC,CAACkC,MAAM,GAAG,CAAC,EAAE;MACxD;IACF;IAEA,MAAMe,mBAAmB,GAAG,MAAAA,CAAA,KAAY;MACtC;MACA,MAAMC,aAAa,GAAGvD,YAAY,IAAIA,YAAY,CAAC,YAAY,CAAC,GAC5DA,YAAY,CAAC,YAAY,CAAC,GAC1B,MAAM;MAEVQ,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMgD,OAAO,GAAG,CAAC,CAAC;;MAElB;MACA,IAAIxD,YAAY,IAAIA,YAAY,CAAC,YAAY,CAAC,EAAE;QAC9CwD,OAAO,CAACxD,YAAY,CAAC,YAAY,CAAC,CAAC,GAAG;UACpCyB,KAAK,EAAEY,UAAU,CAACrC,YAAY,CAAC,WAAW,CAAC,CAAC;UAC5CmC,MAAM,EAAEE,UAAU,CAACrC,YAAY,CAAC,YAAY,CAAC,CAAC;UAC9C+C,aAAa,EAAEV,UAAU,CAACrC,YAAY,CAAC,oBAAoB,CAAC,CAACgD,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAAC;UAC9EC,cAAc,EAAE/B,0BAA0B,CAACmB,UAAU,CAACrC,YAAY,CAAC,WAAW,CAAC,CAAC;QAClF,CAAC;MACH,CAAC,MAAM;QACL;QACA,IAAI;UACF,MAAMyC,MAAM,GAAG,MAAM,CAAC,CAAC;UACvB,MAAMD,cAAc,CAACC,MAAM,EAAEe,OAAO,CAAC;QACvC,CAAC,CAAC,OAAON,GAAG,EAAE;UACZC,OAAO,CAACL,KAAK,CAAC,wCAAwC,EAAEI,GAAG,CAAC;QAC9D;MACF;;MAEA;MACA,KAAK,MAAMT,MAAM,IAAItC,iBAAiB,EAAE;QACtC,IAAIsC,MAAM,KAAKc,aAAa,EAAE;QAE9B,MAAMf,cAAc,CAACC,MAAM,EAAEe,OAAO,CAAC;MACvC;MAEAlD,iBAAiB,CAACkD,OAAO,CAAC;MAC1BhD,UAAU,CAAC,KAAK,CAAC;MACjBQ,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC;IACvB,CAAC;IAEDsC,mBAAmB,CAAC,CAAC;EACvB,CAAC,EAAE,CAACtD,YAAY,EAAEG,iBAAiB,EAAEF,QAAQ,EAAEc,UAAU,EAAEyB,cAAc,EAAEtB,0BAA0B,EAAEb,cAAc,CAAC,CAAC;;EAEvH;EACA,MAAMoD,0BAA0B,GAAGA,CAAA,KAAM;IAAA,IAAAC,qBAAA;IACvC,IAAIN,MAAM,CAACC,IAAI,CAAChD,cAAc,CAAC,CAACkC,MAAM,KAAK,CAAC,EAAE,OAAO,EAAE;;IAEvD;IACA,MAAMoB,WAAW,GAAGP,MAAM,CAACC,IAAI,CAAChD,cAAc,CAAC,CAAC,CAAC,CAAC;IAClD,IAAI,GAAAqD,qBAAA,GAACrD,cAAc,CAACsD,WAAW,CAAC,cAAAD,qBAAA,eAA3BA,qBAAA,CAA6BT,cAAc,GAAE,OAAO,EAAE;IAE3D,MAAMW,UAAU,GAAG,CAAC,CAAC;;IAErB;IACAR,MAAM,CAACC,IAAI,CAAChD,cAAc,CAAC,CAACwD,OAAO,CAACpB,MAAM,IAAI;MAAA,IAAAqB,qBAAA;MAC5C,IAAI,GAAAA,qBAAA,GAACzD,cAAc,CAACoC,MAAM,CAAC,cAAAqB,qBAAA,eAAtBA,qBAAA,CAAwBb,cAAc,GAAE;MAE7C5C,cAAc,CAACoC,MAAM,CAAC,CAACQ,cAAc,CAACY,OAAO,CAACE,SAAS,IAAI;QACzD,IAAI,CAACH,UAAU,CAACG,SAAS,CAAClC,IAAI,CAAC,EAAE;UAC/B+B,UAAU,CAACG,SAAS,CAAClC,IAAI,CAAC,GAAG;YAAEA,IAAI,EAAEkC,SAAS,CAAClC;UAAK,CAAC;QACvD;QACA+B,UAAU,CAACG,SAAS,CAAClC,IAAI,CAAC,CAACY,MAAM,CAAC,GAAGsB,SAAS,CAACtC,KAAK;MACtD,CAAC,CAAC;IACJ,CAAC,CAAC;;IAEF;IACA,OAAO2B,MAAM,CAACY,MAAM,CAACJ,UAAU,CAAC,CAACK,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;MAC9C,MAAMC,KAAK,GAAG,IAAIzC,IAAI,CAACuC,CAAC,CAACrC,IAAI,CAACwC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAEH,CAAC,CAACrC,IAAI,CAACwC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;MAClE,MAAMC,KAAK,GAAG,IAAI3C,IAAI,CAACwC,CAAC,CAACtC,IAAI,CAACwC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAEF,CAAC,CAACtC,IAAI,CAACwC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;MAClE,OAAOD,KAAK,GAAGE,KAAK;IACtB,CAAC,CAAC;EACJ,CAAC;;EAED;EACA,MAAMC,eAAe,GAAGA,CAAA,KAAM;IAC5B,IAAI,CAAC5D,SAAS,IAAIR,iBAAiB,CAACqE,QAAQ,CAAC7D,SAAS,CAAC,EAAE;MACvDD,YAAY,CAAC,KAAK,CAAC;MACnBE,YAAY,CAAC,EAAE,CAAC;MAChB;IACF;IAEAR,oBAAoB,CAAC,CAAC,GAAGD,iBAAiB,EAAEQ,SAAS,CAAC8D,WAAW,CAAC,CAAC,CAAC,CAAC;IACrEzD,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;IACtBN,YAAY,CAAC,KAAK,CAAC;IACnBE,YAAY,CAAC,EAAE,CAAC;EAClB,CAAC;;EAED;EACA,MAAM8D,kBAAkB,GAAIjC,MAAM,IAAK;IACrCrC,oBAAoB,CAACD,iBAAiB,CAACwE,MAAM,CAACC,CAAC,IAAIA,CAAC,KAAKnC,MAAM,CAAC,CAAC;IACjEzB,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC;EACxB,CAAC;;EAED;EACA,MAAM6D,sBAAsB,GAAGA,CAAA,KAAM;IACnC,MAAMC,eAAe,GAAG,EAAE;IAE1B1B,MAAM,CAACC,IAAI,CAAChD,cAAc,CAAC,CAACwD,OAAO,CAAC,CAACpB,MAAM,EAAEsC,KAAK,KAAK;MACrD,IAAI1E,cAAc,CAACoC,MAAM,CAAC,EAAE;QAC1BqC,eAAe,CAAC1C,IAAI,CAAC;UACnB4C,IAAI,EAAEvC,MAAM;UACZwC,KAAK,EAAE5E,cAAc,CAACoC,MAAM,CAAC,CAACM,aAAa;UAC3CmC,KAAK,EAAEjE,MAAM,CAAC8D,KAAK,GAAG9D,MAAM,CAACsB,MAAM,CAAC;UACpCd,KAAK,EAAEpB,cAAc,CAACoC,MAAM,CAAC,CAAChB;QAChC,CAAC,CAAC;MACJ;IACF,CAAC,CAAC;IAEF,OAAOqD,eAAe;EACxB,CAAC;EAED,MAAMK,mBAAmB,GAAG1B,0BAA0B,CAAC,CAAC;EACxD,MAAMqB,eAAe,GAAGD,sBAAsB,CAAC,CAAC;;EAEhD;EACA,MAAMO,gBAAgB,GAAGA,CAAA,kBACvBtF,OAAA,CAACL,mBAAmB;IAAC4F,KAAK,EAAC,MAAM;IAACC,MAAM,EAAE,GAAI;IAAAC,QAAA,eAC5CzF,OAAA,CAACZ,SAAS;MACRkC,IAAI,EAAE+D,mBAAoB;MAC1BK,MAAM,EAAE;QAAEC,GAAG,EAAE,CAAC;QAAEC,KAAK,EAAE,EAAE;QAAEC,IAAI,EAAE,EAAE;QAAEC,MAAM,EAAE;MAAE,CAAE;MAAAL,QAAA,gBAEnDzF,OAAA,CAACR,aAAa;QAACuG,eAAe,EAAC;MAAK;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACvCnG,OAAA,CAACV,KAAK;QAAC8G,OAAO,EAAC;MAAM;QAAAJ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACxBnG,OAAA,CAACT,KAAK;QACJ8G,aAAa,EAAGlB,KAAK,IAAK;UACxB;UACA,IAAIA,KAAK,IAAI,IAAI,IAAIA,KAAK,GAAG,OAAO,EAAE;YACpC,OAAO,IAAI,CAACA,KAAK,GAAG,IAAI,EAAE3C,OAAO,CAAC,CAAC,CAAC,GAAG;UACzC,CAAC,MAAM,IAAI2C,KAAK,IAAI,OAAO,EAAE;YAC3B,OAAO,IAAI,CAACA,KAAK,GAAG,OAAO,EAAE3C,OAAO,CAAC,CAAC,CAAC,GAAG;UAC5C;UACA,OAAO,IAAI2C,KAAK,CAAC3C,OAAO,CAAC,CAAC,CAAC,EAAE;QAC/B;MAAE;QAAAwD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eACFnG,OAAA,CAACP,OAAO;QACN6G,SAAS,EAAGnB,KAAK,IAAK;UACpB;UACA,OAAO,CAAC,IAAI5C,UAAU,CAAC4C,KAAK,CAAC,CAACoB,cAAc,CAACC,SAAS,EAAE;YACtDC,qBAAqB,EAAE,CAAC;YACxBC,qBAAqB,EAAE;UACzB,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC;QACX,CAAE;QACFC,cAAc,EAAGC,KAAK,IAAK,SAASA,KAAK;MAAG;QAAAZ,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7C,CAAC,eACFnG,OAAA,CAACN,MAAM;QAAAsG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,EACT7C,MAAM,CAACC,IAAI,CAAChD,cAAc,CAAC,CAACsG,GAAG,CAAC,CAAClE,MAAM,EAAEsC,KAAK,kBAC7CjF,OAAA,CAACX,IAAI;QAEHyH,IAAI,EAAC,UAAU;QACfV,OAAO,EAAEzD,MAAO;QAChBoE,MAAM,EAAE5F,MAAM,CAAC8D,KAAK,GAAG9D,MAAM,CAACsB,MAAM,CAAE;QACtCuE,SAAS,EAAE;UAAEC,CAAC,EAAE;QAAE,CAAE;QACpB/B,IAAI,EAAEvC;MAAO,GALRA,MAAM;QAAAqD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAMZ,CACF,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACO;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACO,CACtB;;EAED;EACA,MAAMe,sBAAsB,GAAGA,CAAA,kBAC7BlH,OAAA,CAACL,mBAAmB;IAAC4F,KAAK,EAAC,MAAM;IAACC,MAAM,EAAE,GAAI;IAAAC,QAAA,eAC5CzF,OAAA,CAACJ,aAAa;MACZuH,MAAM,EAAC,UAAU;MACjB7F,IAAI,EAAE0D,eAAgB;MACtBU,MAAM,EAAE;QAAEC,GAAG,EAAE,EAAE;QAAEC,KAAK,EAAE,EAAE;QAAEC,IAAI,EAAE,EAAE;QAAEC,MAAM,EAAE;MAAE,CAAE;MAAAL,QAAA,gBAEpDzF,OAAA,CAACR,aAAa;QAACuG,eAAe,EAAC;MAAK;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACvCnG,OAAA,CAACV,KAAK;QACJwH,IAAI,EAAC,QAAQ;QACbT,aAAa,EAAGlB,KAAK,IAAK,GAAGA,KAAK,CAAC3C,OAAO,CAAC,CAAC,CAAC;MAAI;QAAAwD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClD,CAAC,eACFnG,OAAA,CAACT,KAAK;QACJ6G,OAAO,EAAC,MAAM;QACdU,IAAI,EAAC,UAAU;QACfvB,KAAK,EAAE;MAAG;QAAAS,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACX,CAAC,eACFnG,OAAA,CAACP,OAAO;QACN6G,SAAS,EAAEA,CAACnB,KAAK,EAAED,IAAI,EAAEkC,KAAK,KAAK;UACjC,IAAIlC,IAAI,KAAK,OAAO,EAAE,OAAO,CAAC,GAAGC,KAAK,CAAC3C,OAAO,CAAC,CAAC,CAAC,GAAG,EAAE,QAAQ,CAAC;UAC/D,OAAO,CAAC2C,KAAK,EAAED,IAAI,CAAC;QACtB,CAAE;QACFyB,cAAc,EAAGxB,KAAK,IAAK,GAAGA,KAAK;MAAG;QAAAa,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACvC,CAAC,eACFnG,OAAA,CAACH,GAAG;QACFuG,OAAO,EAAC,OAAO;QACfiB,IAAI,EAAC,SAAS;QACdC,OAAO,EAAE,EAAG;QAAA7B,QAAA,EAEXT,eAAe,CAAC6B,GAAG,CAAC,CAACU,KAAK,EAAEtC,KAAK,kBAChCjF,OAAA,CAACH,GAAG;UAAuBwH,IAAI,EAAEE,KAAK,CAACnC;QAAM,GAAnC,QAAQH,KAAK,EAAE;UAAAe,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAsB,CAChD;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACO;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACG,CACtB;EAED,oBACEnG,OAAA;IAAKwH,SAAS,EAAC,uBAAuB;IAAA/B,QAAA,gBACpCzF,OAAA;MAAKwH,SAAS,EAAC,mBAAmB;MAAA/B,QAAA,gBAChCzF,OAAA;QAAAyF,QAAA,EAAI;MAAgB;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACzBnG,OAAA;QAAKwH,SAAS,EAAC,qBAAqB;QAAA/B,QAAA,gBAClCzF,OAAA;UACEwH,SAAS,EAAEzG,SAAS,KAAK,OAAO,GAAG,QAAQ,GAAG,EAAG;UACjD0G,OAAO,EAAEA,CAAA,KAAMzG,YAAY,CAAC,OAAO,CAAE;UAAAyE,QAAA,EACtC;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACTnG,OAAA;UACEwH,SAAS,EAAEzG,SAAS,KAAK,aAAa,GAAG,QAAQ,GAAG,EAAG;UACvD0G,OAAO,EAAEA,CAAA,KAAMzG,YAAY,CAAC,aAAa,CAAE;UAAAyE,QAAA,EAC5C;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACTnG,OAAA;UACEyH,OAAO,EAAEA,CAAA,KAAM;YACbvG,aAAa,CAAC,KAAK,CAAC;YACpBR,UAAU,CAAC,IAAI,CAAC;UAClB,CAAE;UACFgH,QAAQ,EAAEjH,OAAQ;UAAAgF,QAAA,EAEjBhF,OAAO,GAAG,eAAe,GAAG;QAAc;UAAAuF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAENnG,OAAA;MAAKwH,SAAS,EAAC,oBAAoB;MAAA/B,QAAA,gBACjCzF,OAAA;QAAAyF,QAAA,EAAG;MAAW;QAAAO,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG,CAAC,eAClBnG,OAAA;QAAKwH,SAAS,EAAC,aAAa;QAAA/B,QAAA,GACzBvF,YAAY,IAAIA,YAAY,CAAC,YAAY,CAAC,iBACzCF,OAAA;UAAMwH,SAAS,EAAC,oBAAoB;UAAA/B,QAAA,EAAEvF,YAAY,CAAC,YAAY;QAAC;UAAA8F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CACxE,EACA9F,iBAAiB,CAACwG,GAAG,CAAClE,MAAM,IAC1BzC,YAAY,IAAIyC,MAAM,KAAKzC,YAAY,CAAC,YAAY,CAAC,iBACpDF,OAAA;UAAmBwH,SAAS,EAAC,YAAY;UAAA/B,QAAA,GACtC9C,MAAM,eACP3C,OAAA;YACEwH,SAAS,EAAC,eAAe;YACzBC,OAAO,EAAEA,CAAA,KAAM7C,kBAAkB,CAACjC,MAAM,CAAE;YAAA8C,QAAA,EAC3C;UAED;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA,GAPAxD,MAAM;UAAAqD,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAQX,CAET,CAAC,EAED,CAACxF,SAAS,iBACTX,OAAA;UACEwH,SAAS,EAAC,gBAAgB;UAC1BC,OAAO,EAAEA,CAAA,KAAM7G,YAAY,CAAC,IAAI,CAAE;UAAA6E,QAAA,EACnC;QAED;UAAAO,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CACT,EAEAxF,SAAS,iBACRX,OAAA;UAAKwH,SAAS,EAAC,kBAAkB;UAAA/B,QAAA,gBAC/BzF,OAAA;YACE8G,IAAI,EAAC,MAAM;YACX3B,KAAK,EAAEtE,SAAU;YACjB8G,QAAQ,EAAGC,CAAC,IAAK9G,YAAY,CAAC8G,CAAC,CAACC,MAAM,CAAC1C,KAAK,CAAE;YAC9C2C,WAAW,EAAC,QAAQ;YACpBC,SAAS,EAAE;UAAE;YAAA/B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACd,CAAC,eACFnG,OAAA;YAAQyH,OAAO,EAAEhD,eAAgB;YAAAgB,QAAA,EAAC;UAAG;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eAC9CnG,OAAA;YAAQyH,OAAO,EAAEA,CAAA,KAAM7G,YAAY,CAAC,KAAK,CAAE;YAAA6E,QAAA,EAAC;UAAM;YAAAO,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxD,CACN;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EAEL1F,OAAO,gBACNT,OAAA;MAAKwH,SAAS,EAAC,oBAAoB;MAAA/B,QAAA,EAAC;IAA0B;MAAAO,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,gBAEpEnG,OAAA;MAAKwH,SAAS,EAAC,kBAAkB;MAAA/B,QAAA,EAC9B1E,SAAS,KAAK,OAAO,GAAGuE,gBAAgB,CAAC,CAAC,GAAG4B,sBAAsB,CAAC;IAAC;MAAAlB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnE,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV,CAAC;AAAC/F,EAAA,CApZIH,eAAe;AAAA+H,EAAA,GAAf/H,eAAe;AAsZrB,eAAeA,eAAe;AAAC,IAAA+H,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}